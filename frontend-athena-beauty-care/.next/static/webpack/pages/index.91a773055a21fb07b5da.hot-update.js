"use strict";
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Home; }
/* harmony export */ });
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _components_clients_libs_useAxios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/clients/libs/useAxios */ "./components/clients/libs/useAxios.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../styles/Home.module.css */ "./styles/Home.module.css");
/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _components_reusable_components_Alert__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/reusable-components/Alert */ "./components/reusable-components/Alert.js");
/* harmony import */ var _components_clients_navigation_bar_NavigationBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/clients/navigation-bar/NavigationBar */ "./components/clients/navigation-bar/NavigationBar.js");
/* harmony import */ var _components_clients_category_treatment_CategoryTreatment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/clients/category-treatment/CategoryTreatment */ "./components/clients/category-treatment/CategoryTreatment.js");
/* harmony import */ var _components_clients_location_Location__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/clients/location/Location */ "./components/clients/location/Location.js");
/* harmony import */ var _components_clients_date_time_DateTime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/clients/date-time/DateTime */ "./components/clients/date-time/DateTime.js");
/* harmony import */ var _components_clients_information_payment_InformationPayment__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/clients/information-payment/InformationPayment */ "./components/clients/information-payment/InformationPayment.js");
/* harmony import */ var _components_clients_confirmation_page_Confirmation__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/clients/confirmation-page/Confirmation */ "./components/clients/confirmation-page/Confirmation.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__);
/* module decorator */ module = __webpack_require__.hmd(module);




var _jsxFileName = "D:\\programming\\fiverr-projects\\nextjs-projects\\athena-beauty-care\\frontend-athena-beauty-care\\pages\\index.js",
    _s = $RefreshSig$();



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

// React


 // Stylesheet

 // Reusable Components

 // components








function Home() {
  _s();

  // Other states
  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      clientEvents = _useState[0],
      setClientEvents = _useState[1];

  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      selectedTreatments = _useState2[0],
      setSelectedTreatments = _useState2[1];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      sortedSelectedTreatments = _useState3[0],
      setSortedSelectedTreatments = _useState3[1];

  var _useState4 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),
      validationError = _useState4[0],
      setValidationError = _useState4[1];

  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({
    firstName: "",
    lastName: "",
    phone: "",
    email: "",
    howHeardAboutUs: "",
    others: ""
  }),
      clientInfo = _useState5[0],
      setClientInfo = _useState5[1];

  var _useState6 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({
    category: "",
    treatment: "",
    location: "",
    session: "",
    date: "",
    stylist: "",
    coupon: "",
    paid: false
  }),
      state = _useState6[0],
      setState = _useState6[1];

  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)("Brows"),
      activeCategory = _useState7[0],
      setActiveCategory = _useState7[1];

  var _useState8 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(1),
      activePage = _useState8[0],
      setActivePage = _useState8[1];

  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),
      selectedDate = _useState9[0],
      setSelectedDate = _useState9[1];

  var _useState10 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),
      selectedTime = _useState10[0],
      setSelectedTime = _useState10[1]; // update the state with values of the non input fields such as location, stylist, date, time etc. 


  function updateState(event) {
    var text = event.target.textContent;

    if (text.includes("Athena Beauty Care")) {
      return setState(function (currentValue) {
        return _objectSpread(_objectSpread({}, currentValue), {}, {
          location: text
        });
      });
    }
  }

  function changeActiveCategory(e) {
    var text = e.target.textContent;
    setActiveCategory(text);
  }
  /*
  function addTreatment (stylist, item) {
     
      // loop through the already selected treatments to see if clicked one exists or not. It returns either true or false
      const doesExist = selectedTreatments.some(newItem => newItem.treatmentTitle === item.title);
        // If clicked treatment exists update the selectedTreatments array by removing the clicked treatment
      if(doesExist) {
            const temp = [];
            selectedTreatments.forEach(newItem => {
                  
              if(newItem.treatmentTitle !== item.title) {
                  temp.push(newItem);
              }
                  
          })
            setSelectedTreatments(temp);
            if(stylist) {
                setSelectedTreatments(currentValue => 
                  [
                      ...currentValue, 
                      { 
                          category: item.category, 
                          treatmentTitle: item.title, 
                          treatmentDuration: item.duration, 
                          treatmentPrice: item.price,
                          choosenStylist: stylist,
                          location: state.location 
                      }
                  ]
              );
              
          } else {
                return setActiveTreatment("");
              
          }
          
          return setActiveTreatment("");
      }
        // If clicked treatment doesn't exist then add it in the selectedTreatments array
      setSelectedTreatments(currentValue => 
          [
              ...currentValue, 
              { 
                  category: item.category, 
                  treatmentTitle: item.title, 
                  treatmentDuration: item.duration, 
                  treatmentPrice: item.price,
                  choosenStylist: stylist,
                  location: state.location 
              }
          ]
      );
        return setActiveTreatment("");
    }
  */


  function clientInfoOnChangeHandler(event) {
    var name = event.target.name;
    var value = event.target.value;
    return setClientInfo(function (currentValue) {
      return _objectSpread(_objectSpread({}, currentValue), {}, (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.default)({}, name, value));
    });
  }

  function selectTreatment(event, treatments) {
    var treatmentTitle = event.target.textContent; // loop through the already selected treatments to see if clicked one exists or not. It returns either true or false

    var doesExist = selectedTreatments.some(function (newItem) {
      return newItem.title === treatmentTitle;
    });

    if (doesExist) {
      var filteredSelectedTreatments = selectedTreatments.filter(function (treatment) {
        return treatment.title !== treatmentTitle;
      });
      setSelectedTreatments(filteredSelectedTreatments);
    } else {
      var _loop = function _loop(x) {
        if (treatments[x].title === treatmentTitle) {
          setSelectedTreatments(function (currentValue) {
            return [].concat((0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.default)(currentValue), [treatments[x]]);
          });
          return "break";
        }
      };

      for (var x = 0; x < treatments.length; x++) {
        var _ret = _loop(x);

        if (_ret === "break") break;
      }
    }
  }

  function createBooking() {
    return _createBooking.apply(this, arguments);
  } // console.log(locationData);
  // if(locationDataLoading || categoryDataLoading || treatmentDataLoading) {
  //     return (<div>Loading....</div>);
  // }


  function _createBooking() {
    _createBooking = (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)( /*#__PURE__*/D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee() {
      var response;
      return D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return axios__WEBPACK_IMPORTED_MODULE_6___default().post("http://localhost:7070/api/events/client-events", {
                sortedSelectedTreatments: sortedSelectedTreatments,
                selectedTime: selectedTime,
                clientInfo: clientInfo
              });

            case 3:
              response = _context.sent;
              console.log(response.data);
              setClientEvents(response.data);
              _context.next = 11;
              break;

            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](0);
              console.log(_context.t0.response.data);

            case 11:
              _context.prev = 11;
              setActivePage(5);
              return _context.finish(11);

            case 14:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 8, 11, 14]]);
    }));
    return _createBooking.apply(this, arguments);
  }

  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)("div", {
    className: (_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15___default().home),
    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_navigation_bar_NavigationBar__WEBPACK_IMPORTED_MODULE_8__.default, {
      state: state,
      selectedTreatments: selectedTreatments,
      activePage: activePage,
      setActivePage: setActivePage,
      selectedTime: selectedTime
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 227,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_location_Location__WEBPACK_IMPORTED_MODULE_10__.default, {
      activePage: activePage,
      state: state,
      updateState: updateState
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 234,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_category_treatment_CategoryTreatment__WEBPACK_IMPORTED_MODULE_9__.default, {
      selectedTreatments: selectedTreatments,
      activePage: activePage,
      activeCategory: activeCategory,
      changeActiveCategory: changeActiveCategory,
      selectTreatment: selectTreatment
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 240,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_date_time_DateTime__WEBPACK_IMPORTED_MODULE_11__.default, {
      state: state,
      activePage: activePage,
      updateState: updateState,
      location: state.location,
      selectedTreatments: selectedTreatments,
      setSortedSelectedTreatments: setSortedSelectedTreatments,
      selectedDate: selectedDate,
      setSelectedDate: setSelectedDate,
      selectedTime: selectedTime,
      setSelectedTime: setSelectedTime
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 251,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_information_payment_InformationPayment__WEBPACK_IMPORTED_MODULE_12__.default, {
      activePage: activePage,
      clientInfo: clientInfo,
      clientInfoOnChangeHandler: clientInfoOnChangeHandler,
      validationError: validationError,
      createBooking: createBooking
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 264,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_confirmation_page_Confirmation__WEBPACK_IMPORTED_MODULE_13__.default, {
      activePage: activePage,
      clientEvents: clientEvents
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 273,
      columnNumber: 13
    }, this)]
  }, void 0, true, {
    fileName: _jsxFileName,
    lineNumber: 226,
    columnNumber: 9
  }, this);
}

_s(Home, "HCtNAwnJEELUGYoLJXG0CUgTMLg=");

_c = Home;

var _c;

$RefreshReg$(_c, "Home");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }


/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljL3dlYnBhY2svcGFnZXMvaW5kZXguOTFhNzczMDU1YTIxZmIwN2I1ZGEuaG90LXVwZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7Q0FJQTs7Q0FHQTs7Q0FHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR2UsU0FBU1ksSUFBVCxHQUFpQjtBQUFBOztBQUc1QjtBQUNBLGtCQUF3Q1osK0NBQVEsQ0FBQyxFQUFELENBQWhEO0FBQUEsTUFBT2EsWUFBUDtBQUFBLE1BQXFCQyxlQUFyQjs7QUFDQSxtQkFBb0RkLCtDQUFRLENBQUMsRUFBRCxDQUE1RDtBQUFBLE1BQU9lLGtCQUFQO0FBQUEsTUFBMkJDLHFCQUEzQjs7QUFDQSxtQkFBZ0VoQiwrQ0FBUSxDQUFDLEVBQUQsQ0FBeEU7QUFBQSxNQUFPaUIsd0JBQVA7QUFBQSxNQUFpQ0MsMkJBQWpDOztBQUNBLG1CQUE4Q2xCLCtDQUFRLENBQUMsS0FBRCxDQUF0RDtBQUFBLE1BQU9tQixlQUFQO0FBQUEsTUFBd0JDLGtCQUF4Qjs7QUFDQSxtQkFBb0NwQiwrQ0FBUSxDQUFDO0FBQ3pDcUIsSUFBQUEsU0FBUyxFQUFFLEVBRDhCO0FBRXpDQyxJQUFBQSxRQUFRLEVBQUUsRUFGK0I7QUFHekNDLElBQUFBLEtBQUssRUFBRSxFQUhrQztBQUl6Q0MsSUFBQUEsS0FBSyxFQUFFLEVBSmtDO0FBS3pDQyxJQUFBQSxlQUFlLEVBQUUsRUFMd0I7QUFNekNDLElBQUFBLE1BQU0sRUFBRTtBQU5pQyxHQUFELENBQTVDO0FBQUEsTUFBT0MsVUFBUDtBQUFBLE1BQW1CQyxhQUFuQjs7QUFRQSxtQkFBMEI1QiwrQ0FBUSxDQUFDO0FBQy9CNkIsSUFBQUEsUUFBUSxFQUFFLEVBRHFCO0FBRS9CQyxJQUFBQSxTQUFTLEVBQUUsRUFGb0I7QUFHL0JDLElBQUFBLFFBQVEsRUFBRSxFQUhxQjtBQUkvQkMsSUFB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QUltRDtBQUxyQjtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBdENKLGVBK0NJLCtEQUFDLHdGQUFEO0FBQ0ksZ0JBQVUsRUFBSTdCLFVBRGxCO0FBRUksa0JBQVksRUFBRTVCO0FBRmxCO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUEvQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBREo7QUF3REg7O0dBblF1QkQ7O0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0XHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHVzZUF4aW9zIGZyb20gXCIuLi9jb21wb25lbnRzL2NsaWVudHMvbGlicy91c2VBeGlvc1wiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcblxyXG5cclxuLy8gU3R5bGVzaGVldFxyXG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuLi9zdHlsZXMvSG9tZS5tb2R1bGUuY3NzXCI7XHJcblxyXG4vLyBSZXVzYWJsZSBDb21wb25lbnRzXHJcbmltcG9ydCBBbGVydCBmcm9tIFwiLi4vY29tcG9uZW50cy9yZXVzYWJsZS1jb21wb25lbnRzL0FsZXJ0XCI7XHJcblxyXG4vLyBjb21wb25lbnRzXHJcbmltcG9ydCBOYXZpZ2F0aW9uQmFyIGZyb20gXCIuLi9jb21wb25lbnRzL2NsaWVudHMvbmF2aWdhdGlvbi1iYXIvTmF2aWdhdGlvbkJhclwiO1xyXG5pbXBvcnQgQ2F0ZWdvcnlUcmVhdG1lbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9jYXRlZ29yeS10cmVhdG1lbnQvQ2F0ZWdvcnlUcmVhdG1lbnRcIjtcclxuaW1wb3J0IExvY2F0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL2NsaWVudHMvbG9jYXRpb24vTG9jYXRpb25cIjtcclxuaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuLi9jb21wb25lbnRzL2NsaWVudHMvZGF0ZS10aW1lL0RhdGVUaW1lXCI7XHJcbmltcG9ydCBJbmZvcm1hdGlvblBheW1lbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9pbmZvcm1hdGlvbi1wYXltZW50L0luZm9ybWF0aW9uUGF5bWVudFwiO1xyXG5pbXBvcnQgQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL2NsaWVudHMvY29uZmlybWF0aW9uLXBhZ2UvQ29uZmlybWF0aW9uXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSAoKSB7XHJcblxyXG5cclxuICAgIC8vIE90aGVyIHN0YXRlc1xyXG4gICAgY29uc3QgW2NsaWVudEV2ZW50cywgc2V0Q2xpZW50RXZlbnRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtzZWxlY3RlZFRyZWF0bWVudHMsIHNldFNlbGVjdGVkVHJlYXRtZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbc29ydGVkU2VsZWN0ZWRUcmVhdG1lbnRzLCBzZXRTb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHNdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgY29uc3QgW3ZhbGlkYXRpb25FcnJvciwgc2V0VmFsaWRhdGlvbkVycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IFtjbGllbnRJbmZvLCBzZXRDbGllbnRJbmZvXSA9IHVzZVN0YXRlKHtcclxuICAgICAgICBmaXJzdE5hbWU6IFwiXCIsXHJcbiAgICAgICAgbGFzdE5hbWU6IFwiXCIsXHJcbiAgICAgICAgcGhvbmU6IFwiXCIsXHJcbiAgICAgICAgZW1haWw6IFwiXCIsXHJcbiAgICAgICAgaG93SGVhcmRBYm91dFVzOiBcIlwiLFxyXG4gICAgICAgIG90aGVyczogXCJcIixcclxuICAgIH0pO1xyXG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiXCIsXHJcbiAgICAgICAgdHJlYXRtZW50OiBcIlwiLFxyXG4gICAgICAgIGxvY2F0aW9uOiBcIlwiLFxyXG4gICAgICAgIHNlc3Npb246IFwiXCIsXHJcbiAgICAgICAgZGF0ZTogXCJcIixcclxuICAgICAgICBzdHlsaXN0OiBcIlwiLFxyXG4gICAgICAgIGNvdXBvbjogXCJcIixcclxuICAgICAgICBwYWlkOiBmYWxzZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgW2FjdGl2ZUNhdGVnb3J5LCBzZXRBY3RpdmVDYXRlZ29yeV0gPSB1c2VTdGF0ZShcIkJyb3dzXCIpO1xyXG4gICAgY29uc3QgW2FjdGl2ZVBhZ2UsIHNldEFjdGl2ZVBhZ2VdID0gdXNlU3RhdGUoMSk7XHJcbiAgICBjb25zdCBbc2VsZWN0ZWREYXRlLCBzZXRTZWxlY3RlZERhdGVdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgICBjb25zdCBbc2VsZWN0ZWRUaW1lLCBzZXRTZWxlY3RlZFRpbWVdID0gdXNlU3RhdGUoXCJcIik7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8vIHVwZGF0ZSB0aGUgc3RhdGUgd2l0aCB2YWx1ZXMgb2YgdGhlIG5vbiBpbnB1dCBmaWVsZHMgc3VjaCBhcyBsb2NhdGlvbiwgc3R5bGlzdCwgZGF0ZSwgdGltZSBldGMuIFxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU3RhdGUgKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgICAgIGlmKHRleHQuaW5jbHVkZXMoXCJBdGhlbmEgQmVhdXR5IENhcmVcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFN0YXRlKGN1cnJlbnRWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogdGV4dFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUFjdGl2ZUNhdGVnb3J5IChlKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGUudGFyZ2V0LnRleHRDb250ZW50O1xyXG5cclxuICAgICAgIFxyXG4gICAgICAgIHNldEFjdGl2ZUNhdGVnb3J5KHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgXHJcblxyXG4gICAgLypcclxuICAgIGZ1bmN0aW9uIGFkZFRyZWF0bWVudCAoc3R5bGlzdCwgaXRlbSkge1xyXG4gICAgICAgXHJcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBhbHJlYWR5IHNlbGVjdGVkIHRyZWF0bWVudHMgdG8gc2VlIGlmIGNsaWNrZWQgb25lIGV4aXN0cyBvciBub3QuIEl0IHJldHVybnMgZWl0aGVyIHRydWUgb3IgZmFsc2VcclxuICAgICAgICBjb25zdCBkb2VzRXhpc3QgPSBzZWxlY3RlZFRyZWF0bWVudHMuc29tZShuZXdJdGVtID0+IG5ld0l0ZW0udHJlYXRtZW50VGl0bGUgPT09IGl0ZW0udGl0bGUpO1xyXG5cclxuICAgICAgICAvLyBJZiBjbGlja2VkIHRyZWF0bWVudCBleGlzdHMgdXBkYXRlIHRoZSBzZWxlY3RlZFRyZWF0bWVudHMgYXJyYXkgYnkgcmVtb3ZpbmcgdGhlIGNsaWNrZWQgdHJlYXRtZW50XHJcbiAgICAgICAgaWYoZG9lc0V4aXN0KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gW107XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFRyZWF0bWVudHMuZm9yRWFjaChuZXdJdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKG5ld0l0ZW0udHJlYXRtZW50VGl0bGUgIT09IGl0ZW0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2gobmV3SXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZFRyZWF0bWVudHModGVtcCk7XHJcblxyXG4gICAgICAgICAgICBpZihzdHlsaXN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmVhdG1lbnRzKGN1cnJlbnRWYWx1ZSA9PiBcclxuICAgICAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRWYWx1ZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVhdG1lbnRUaXRsZTogaXRlbS50aXRsZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVhdG1lbnREdXJhdGlvbjogaXRlbS5kdXJhdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVhdG1lbnRQcmljZTogaXRlbS5wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob29zZW5TdHlsaXN0OiBzdHlsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXRBY3RpdmVUcmVhdG1lbnQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNldEFjdGl2ZVRyZWF0bWVudChcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIGNsaWNrZWQgdHJlYXRtZW50IGRvZXNuJ3QgZXhpc3QgdGhlbiBhZGQgaXQgaW4gdGhlIHNlbGVjdGVkVHJlYXRtZW50cyBhcnJheVxyXG4gICAgICAgIHNldFNlbGVjdGVkVHJlYXRtZW50cyhjdXJyZW50VmFsdWUgPT4gXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRWYWx1ZSwgXHJcbiAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5LCBcclxuICAgICAgICAgICAgICAgICAgICB0cmVhdG1lbnRUaXRsZTogaXRlbS50aXRsZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJlYXRtZW50RHVyYXRpb246IGl0ZW0uZHVyYXRpb24sIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWF0bWVudFByaWNlOiBpdGVtLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNob29zZW5TdHlsaXN0OiBzdHlsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBzdGF0ZS5sb2NhdGlvbiBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXRBY3RpdmVUcmVhdG1lbnQoXCJcIik7XHJcblxyXG4gICAgfVxyXG4gICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjbGllbnRJbmZvT25DaGFuZ2VIYW5kbGVyIChldmVudCkge1xyXG5cclxuICAgICAgICBjb25zdCBuYW1lID0gZXZlbnQudGFyZ2V0Lm5hbWU7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWVcclxuXHJcbiAgICAgICAgcmV0dXJuIHNldENsaWVudEluZm8oY3VycmVudFZhbHVlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRWYWx1ZSxcclxuICAgICAgICAgICAgICAgIFtuYW1lXTogdmFsdWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0VHJlYXRtZW50KGV2ZW50LCB0cmVhdG1lbnRzKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRyZWF0bWVudFRpdGxlID0gZXZlbnQudGFyZ2V0LnRleHRDb250ZW50O1xyXG5cclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGFscmVhZHkgc2VsZWN0ZWQgdHJlYXRtZW50cyB0byBzZWUgaWYgY2xpY2tlZCBvbmUgZXhpc3RzIG9yIG5vdC4gSXQgcmV0dXJucyBlaXRoZXIgdHJ1ZSBvciBmYWxzZVxyXG4gICAgICAgIGNvbnN0IGRvZXNFeGlzdCA9IHNlbGVjdGVkVHJlYXRtZW50cy5zb21lKG5ld0l0ZW0gPT4gbmV3SXRlbS50aXRsZSA9PT0gdHJlYXRtZW50VGl0bGUpO1xyXG5cclxuXHJcbiAgICAgICAgaWYoZG9lc0V4aXN0KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFNlbGVjdGVkVHJlYXRtZW50cyA9IHNlbGVjdGVkVHJlYXRtZW50cy5maWx0ZXIodHJlYXRtZW50ID0+IHRyZWF0bWVudC50aXRsZSAhPT0gdHJlYXRtZW50VGl0bGUpO1xyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZFRyZWF0bWVudHMoZmlsdGVyZWRTZWxlY3RlZFRyZWF0bWVudHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgdHJlYXRtZW50cy5sZW5ndGg7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHRyZWF0bWVudHNbeF0udGl0bGUgPT09IHRyZWF0bWVudFRpdGxlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVHJlYXRtZW50cyhjdXJyZW50VmFsdWUgPT4geyByZXR1cm4gWy4uLmN1cnJlbnRWYWx1ZSwgdHJlYXRtZW50c1t4XV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiBjcmVhdGVCb29raW5nKCkge1xyXG5cclxuICAgICAgICB0cnkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFwiaHR0cDovL2xvY2FsaG9zdDo3MDcwL2FwaS9ldmVudHMvY2xpZW50LWV2ZW50c1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHMsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRpbWUsXHJcbiAgICAgICAgICAgICAgICBjbGllbnRJbmZvXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIHNldENsaWVudEV2ZW50cyhyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpO1xyXG5cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVQYWdlKDUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICBcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgLy8gY29uc29sZS5sb2cobG9jYXRpb25EYXRhKTtcclxuXHJcbiAgICAvLyBpZihsb2NhdGlvbkRhdGFMb2FkaW5nIHx8IGNhdGVnb3J5RGF0YUxvYWRpbmcgfHwgdHJlYXRtZW50RGF0YUxvYWRpbmcpIHtcclxuICAgIC8vICAgICByZXR1cm4gKDxkaXY+TG9hZGluZy4uLi48L2Rpdj4pO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ob21lfT5cclxuICAgICAgICAgICAgPE5hdmlnYXRpb25CYXIgXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHtzdGF0ZX0gXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRyZWF0bWVudHMgPSB7c2VsZWN0ZWRUcmVhdG1lbnRzfVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfSBcclxuICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBhZ2UgPSB7c2V0QWN0aXZlUGFnZX0gXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRpbWUgPSB7c2VsZWN0ZWRUaW1lfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8TG9jYXRpb25cclxuICAgICAgICAgICAgICAgIGFjdGl2ZVBhZ2UgPSB7YWN0aXZlUGFnZX1cclxuICAgICAgICAgICAgICAgIHN0YXRlID0ge3N0YXRlfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSB7dXBkYXRlU3RhdGV9IFxyXG4gICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgPENhdGVnb3J5VHJlYXRtZW50XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRyZWF0bWVudHMgPSB7c2VsZWN0ZWRUcmVhdG1lbnRzfVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfVxyXG4gICAgICAgICAgICAgICAgYWN0aXZlQ2F0ZWdvcnkgPSB7YWN0aXZlQ2F0ZWdvcnl9XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VBY3RpdmVDYXRlZ29yeSA9IHtjaGFuZ2VBY3RpdmVDYXRlZ29yeX1cclxuICAgICAgICAgICAgICAgIHNlbGVjdFRyZWF0bWVudCA9IHtzZWxlY3RUcmVhdG1lbnR9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgIFxyXG5cclxuXHJcbiAgICAgICAgICAgIDxEYXRlVGltZVxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSB7c3RhdGV9IFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUgPSB7dXBkYXRlU3RhdGV9IFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSB7c3RhdGUubG9jYXRpb259XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRyZWF0bWVudHMgPSB7c2VsZWN0ZWRUcmVhdG1lbnRzfVxyXG4gICAgICAgICAgICAgICAgc2V0U29ydGVkU2VsZWN0ZWRUcmVhdG1lbnRzID0ge3NldFNvcnRlZFNlbGVjdGVkVHJlYXRtZW50c31cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9IHtzZWxlY3RlZERhdGV9XHJcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZERhdGUgPSB7c2V0U2VsZWN0ZWREYXRlfVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lID0ge3NlbGVjdGVkVGltZX1cclxuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVGltZSA9IHtzZXRTZWxlY3RlZFRpbWV9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICA8SW5mb3JtYXRpb25QYXltZW50IFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfVxyXG4gICAgICAgICAgICAgICAgY2xpZW50SW5mbyA9IHtjbGllbnRJbmZvfVxyXG4gICAgICAgICAgICAgICAgY2xpZW50SW5mb09uQ2hhbmdlSGFuZGxlciA9IHtjbGllbnRJbmZvT25DaGFuZ2VIYW5kbGVyfSBcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvciA9IHt2YWxpZGF0aW9uRXJyb3J9XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVCb29raW5nID0ge2NyZWF0ZUJvb2tpbmd9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG5cclxuICAgICAgICAgICAgPENvbmZpcm1hdGlvbiBcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVBhZ2UgPSB7YWN0aXZlUGFnZX1cclxuICAgICAgICAgICAgICAgIGNsaWVudEV2ZW50cz17Y2xpZW50RXZlbnRzfVxyXG5cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgey8qIDxBbGVydCBtZXNzYWdlPVwiXCIgLz4gKi99XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQXhpb3MiLCJheGlvcyIsInN0eWxlcyIsIkFsZXJ0IiwiTmF2aWdhdGlvbkJhciIsIkNhdGVnb3J5VHJlYXRtZW50IiwiTG9jYXRpb24iLCJEYXRlVGltZSIsIkluZm9ybWF0aW9uUGF5bWVudCIsIkNvbmZpcm1hdGlvbiIsIkhvbWUiLCJjbGllbnRFdmVudHMiLCJzZXRDbGllbnRFdmVudHMiLCJzZWxlY3RlZFRyZWF0bWVudHMiLCJzZXRTZWxlY3RlZFRyZWF0bWVudHMiLCJzb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHMiLCJzZXRTb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHMiLCJ2YWxpZGF0aW9uRXJyb3IiLCJzZXRWYWxpZGF0aW9uRXJyb3IiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiZW1haWwiLCJob3dIZWFyZEFib3V0VXMiLCJvdGhlcnMiLCJjbGllbnRJbmZvIiwic2V0Q2xpZW50SW5mbyIsImNhdGVnb3J5IiwidHJlYXRtZW50IiwibG9jYXRpb24iLCJzZXNzaW9uIiwiZGF0ZSIsInN0eWxpc3QiLCJjb3Vwb24iLCJwYWlkIiwic3RhdGUiLCJzZXRTdGF0ZSIsImFjdGl2ZUNhdGVnb3J5Iiwic2V0QWN0aXZlQ2F0ZWdvcnkiLCJhY3RpdmVQYWdlIiwic2V0QWN0aXZlUGFnZSIsInNlbGVjdGVkRGF0ZSIsInNldFNlbGVjdGVkRGF0ZSIsInNlbGVjdGVkVGltZSIsInNldFNlbGVjdGVkVGltZSIsInVwZGF0ZVN0YXRlIiwiZXZlbnQiLCJ0ZXh0IiwidGFyZ2V0IiwidGV4dENvbnRlbnQiLCJpbmNsdWRlcyIsImN1cnJlbnRWYWx1ZSIsImNoYW5nZUFjdGl2ZUNhdGVnb3J5IiwiZSIsImNsaWVudEluZm9PbkNoYW5nZUhhbmRsZXIiLCJuYW1lIiwidmFsdWUiLCJzZWxlY3RUcmVhdG1lbnQiLCJ0cmVhdG1lbnRzIiwidHJlYXRtZW50VGl0bGUiLCJkb2VzRXhpc3QiLCJzb21lIiwibmV3SXRlbSIsInRpdGxlIiwiZmlsdGVyZWRTZWxlY3RlZFRyZWF0bWVudHMiLCJmaWx0ZXIiLCJ4IiwibGVuZ3RoIiwiY3JlYXRlQm9va2luZyIsInBvc3QiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwiaG9tZSJdLCJzb3VyY2VSb290IjoiIn0=