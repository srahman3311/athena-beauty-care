"use strict";
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Home; }
/* harmony export */ });
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _components_clients_libs_useAxios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/clients/libs/useAxios */ "./components/clients/libs/useAxios.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../styles/Home.module.css */ "./styles/Home.module.css");
/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _components_reusable_components_Alert__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/reusable-components/Alert */ "./components/reusable-components/Alert.js");
/* harmony import */ var _components_clients_navigation_bar_NavigationBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/clients/navigation-bar/NavigationBar */ "./components/clients/navigation-bar/NavigationBar.js");
/* harmony import */ var _components_clients_category_treatment_CategoryTreatment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/clients/category-treatment/CategoryTreatment */ "./components/clients/category-treatment/CategoryTreatment.js");
/* harmony import */ var _components_clients_location_Location__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/clients/location/Location */ "./components/clients/location/Location.js");
/* harmony import */ var _components_clients_date_time_DateTime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/clients/date-time/DateTime */ "./components/clients/date-time/DateTime.js");
/* harmony import */ var _components_clients_information_payment_InformationPayment__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/clients/information-payment/InformationPayment */ "./components/clients/information-payment/InformationPayment.js");
/* harmony import */ var _components_clients_confirmation_page_Confirmation__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/clients/confirmation-page/Confirmation */ "./components/clients/confirmation-page/Confirmation.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__);
/* module decorator */ module = __webpack_require__.hmd(module);




var _jsxFileName = "D:\\programming\\fiverr-projects\\nextjs-projects\\athena-beauty-care\\frontend-athena-beauty-care\\pages\\index.js",
    _s = $RefreshSig$();



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

// React


 // Stylesheet

 // Reusable Components

 // components








function Home() {
  _s();

  // Other states
  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      clientEvents = _useState[0],
      setClientEvents = _useState[1];

  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      selectedTreatments = _useState2[0],
      setSelectedTreatments = _useState2[1];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),
      sortedSelectedTreatments = _useState3[0],
      setSortedSelectedTreatments = _useState3[1];

  var _useState4 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),
      validationError = _useState4[0],
      setValidationError = _useState4[1];

  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({
    firstName: "",
    lastName: "",
    phone: "",
    email: "",
    howHeardAboutUs: "",
    others: ""
  }),
      clientInfo = _useState5[0],
      setClientInfo = _useState5[1];

  var _useState6 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({
    category: "",
    treatment: "",
    location: "",
    session: "",
    date: "",
    stylist: "",
    coupon: "",
    paid: false
  }),
      state = _useState6[0],
      setState = _useState6[1];

  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)("Brows"),
      activeCategory = _useState7[0],
      setActiveCategory = _useState7[1];

  var _useState8 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(1),
      activePage = _useState8[0],
      setActivePage = _useState8[1];

  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),
      selectedDate = _useState9[0],
      setSelectedDate = _useState9[1];

  var _useState10 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),
      selectedTime = _useState10[0],
      setSelectedTime = _useState10[1]; // update the state with values of the non input fields such as location, stylist, date, time etc. 


  function updateState(event) {
    var text = event.target.textContent;

    if (text.includes("Athena Beauty Care")) {
      return setState(function (currentValue) {
        return _objectSpread(_objectSpread({}, currentValue), {}, {
          location: text
        });
      });
    }
  }

  function changeActiveCategory(e) {
    var text = e.target.textContent;
    setActiveCategory(text);
  }
  /*
  function addTreatment (stylist, item) {
     
      // loop through the already selected treatments to see if clicked one exists or not. It returns either true or false
      const doesExist = selectedTreatments.some(newItem => newItem.treatmentTitle === item.title);
        // If clicked treatment exists update the selectedTreatments array by removing the clicked treatment
      if(doesExist) {
            const temp = [];
            selectedTreatments.forEach(newItem => {
                  
              if(newItem.treatmentTitle !== item.title) {
                  temp.push(newItem);
              }
                  
          })
            setSelectedTreatments(temp);
            if(stylist) {
                setSelectedTreatments(currentValue => 
                  [
                      ...currentValue, 
                      { 
                          category: item.category, 
                          treatmentTitle: item.title, 
                          treatmentDuration: item.duration, 
                          treatmentPrice: item.price,
                          choosenStylist: stylist,
                          location: state.location 
                      }
                  ]
              );
              
          } else {
                return setActiveTreatment("");
              
          }
          
          return setActiveTreatment("");
      }
        // If clicked treatment doesn't exist then add it in the selectedTreatments array
      setSelectedTreatments(currentValue => 
          [
              ...currentValue, 
              { 
                  category: item.category, 
                  treatmentTitle: item.title, 
                  treatmentDuration: item.duration, 
                  treatmentPrice: item.price,
                  choosenStylist: stylist,
                  location: state.location 
              }
          ]
      );
        return setActiveTreatment("");
    }
  */


  function clientInfoOnChangeHandler(event) {
    var name = event.target.name;
    var value = event.target.value;
    return setClientInfo(function (currentValue) {
      return _objectSpread(_objectSpread({}, currentValue), {}, (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.default)({}, name, value));
    });
  }

  function selectTreatment(event, treatments) {
    var treatmentTitle = event.target.textContent; // loop through the already selected treatments to see if clicked one exists or not. It returns either true or false

    var doesExist = selectedTreatments.some(function (newItem) {
      return newItem.title === treatmentTitle;
    });

    if (doesExist) {
      var filteredSelectedTreatments = selectedTreatments.filter(function (treatment) {
        return treatment.title !== treatmentTitle;
      });
      setSelectedTreatments(filteredSelectedTreatments);
    } else {
      var _loop = function _loop(x) {
        if (treatments[x].title === treatmentTitle) {
          setSelectedTreatments(function (currentValue) {
            return [].concat((0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.default)(currentValue), [treatments[x]]);
          });
          return "break";
        }
      };

      for (var x = 0; x < treatments.length; x++) {
        var _ret = _loop(x);

        if (_ret === "break") break;
      }
    }
  }

  function createBooking() {
    return _createBooking.apply(this, arguments);
  } // console.log(locationData);
  // if(locationDataLoading || categoryDataLoading || treatmentDataLoading) {
  //     return (<div>Loading....</div>);
  // }


  function _createBooking() {
    _createBooking = (0,D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)( /*#__PURE__*/D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee() {
      var response, data;
      return D_programming_fiverr_projects_nextjs_projects_athena_beauty_care_frontend_athena_beauty_care_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return axios__WEBPACK_IMPORTED_MODULE_6___default().post("http://localhost:7070/api/events/client-events", {
                sortedSelectedTreatments: sortedSelectedTreatments,
                selectedTime: selectedTime,
                clientInfo: clientInfo
              });

            case 3:
              response = _context.sent;
              _context.next = 6;
              return response.data;

            case 6:
              data = _context.sent;
              setClientEvents(data);
              _context.next = 13;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              console.log(_context.t0.response.data);

            case 13:
              _context.prev = 13;
              setClientInfo({
                firstName: "",
                lastName: "",
                phone: "",
                email: "",
                howHeardAboutUs: "",
                others: ""
              });
              setState(function (currentValue) {
                return _objectSpread(_objectSpread({}, currentValue), {}, {
                  location: ""
                });
              });
              setSelectedTreatments([]);
              setSortedSelectedTreatments([]);
              setSelectedDate("");
              setSelectedTime("");
              setActivePage(5);
              return _context.finish(13);

            case 22:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 10, 13, 22]]);
    }));
    return _createBooking.apply(this, arguments);
  }

  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)("div", {
    className: (_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_15___default().home),
    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_navigation_bar_NavigationBar__WEBPACK_IMPORTED_MODULE_8__.default, {
      state: state,
      selectedTreatments: selectedTreatments,
      activePage: activePage,
      setActivePage: setActivePage,
      selectedTime: selectedTime
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 246,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_location_Location__WEBPACK_IMPORTED_MODULE_10__.default, {
      activePage: activePage,
      state: state,
      updateState: updateState
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 253,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_category_treatment_CategoryTreatment__WEBPACK_IMPORTED_MODULE_9__.default, {
      selectedTreatments: selectedTreatments,
      activePage: activePage,
      activeCategory: activeCategory,
      changeActiveCategory: changeActiveCategory,
      selectTreatment: selectTreatment
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 259,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_date_time_DateTime__WEBPACK_IMPORTED_MODULE_11__.default, {
      state: state,
      activePage: activePage,
      updateState: updateState,
      location: state.location,
      selectedTreatments: selectedTreatments,
      setSortedSelectedTreatments: setSortedSelectedTreatments,
      selectedDate: selectedDate,
      setSelectedDate: setSelectedDate,
      selectedTime: selectedTime,
      setSelectedTime: setSelectedTime
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 270,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_information_payment_InformationPayment__WEBPACK_IMPORTED_MODULE_12__.default, {
      activePage: activePage,
      clientInfo: clientInfo,
      clientInfoOnChangeHandler: clientInfoOnChangeHandler,
      validationError: validationError,
      createBooking: createBooking
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 283,
      columnNumber: 13
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxDEV)(_components_clients_confirmation_page_Confirmation__WEBPACK_IMPORTED_MODULE_13__.default, {
      activePage: activePage,
      clientEvents: clientEvents
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 292,
      columnNumber: 13
    }, this)]
  }, void 0, true, {
    fileName: _jsxFileName,
    lineNumber: 245,
    columnNumber: 9
  }, this);
}

_s(Home, "HCtNAwnJEELUGYoLJXG0CUgTMLg=");

_c = Home;

var _c;

$RefreshReg$(_c, "Home");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }


/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljL3dlYnBhY2svcGFnZXMvaW5kZXguODlkZmZlOTgxMjdiY2QyOWFmOTAuaG90LXVwZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7Q0FJQTs7Q0FHQTs7Q0FHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR2UsU0FBU1ksSUFBVCxHQUFpQjtBQUFBOztBQUc1QjtBQUNBLGtCQUF3Q1osK0NBQVEsQ0FBQyxFQUFELENBQWhEO0FBQUEsTUFBT2EsWUFBUDtBQUFBLE1BQXFCQyxlQUFyQjs7QUFDQSxtQkFBb0RkLCtDQUFRLENBQUMsRUFBRCxDQUE1RDtBQUFBLE1BQU9lLGtCQUFQO0FBQUEsTUFBMkJDLHFCQUEzQjs7QUFDQSxtQkFBZ0VoQiwrQ0FBUSxDQUFDLEVBQUQsQ0FBeEU7QUFBQSxNQUFPaUIsd0JBQVA7QUFBQSxNQUFpQ0MsMkJBQWpDOztBQUNBLG1CQUE4Q2xCLCtDQUFRLENBQUMsS0FBRCxDQUF0RDtBQUFBLE1BQU9tQixlQUFQO0FBQUEsTUFBd0JDLGtCQUF4Qjs7QUFDQSxtQkFBb0NwQiwrQ0FBUSxDQUFDO0FBQ3pDcUIsSUFBQUEsU0FBUyxFQUFFLEVBRDhCO0FBRXpDQyxJQUFBQSxRQUFRLEVBQUUsRUFGK0I7QUFHekNDLElBQUFBLEtBQUssRUFBRSxFQUhrQztBQUl6Q0MsSUFBQUEsS0FBSyxFQUFFLEVBSmtDO0FBS3pDQyxJQUFBQSxlQUFlLEVBQUUsRUFMd0I7QUFNekNDLElBQUFBLE1BQU0sRUFBRTtBQU5pQyxHQUFELENBQTVDO0FBQUEsTUFBT0MsVUFBUDtBQUFBLE1BQW1CQyxhQUFuQjs7QUFRQSxtQkFBMEI1QiwrQ0FBUSxDQUFDO0FBQy9CNkIsSUFBQUEsUUFBUSxFQUFFLEVBRHFCO0FBRS9CQyxJQUFBQSxTQUFTLEVBQUUsRUFGb0I7QUFHL0JDLElBQUFBLFFBQVEsRUFBRSxFQUhxQjtBQUkvQkMsSUFB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QUFBQTtBQUFBLFlBZEosZUF5QkksK0RBQUMsNEVBQUQ7QUFDSSxXQUFLLEVBQUl0QixLQURiO0FBRUksZ0JBQVUsRUFBSUksVUFGbEI7QUFHSSxpQkFBVyxFQUFJTSxXQUhuQjtBQUlJLGNBQVEsRUFBSVYsS0FBSyxDQUFDTixRQUp0QjtBQUtJLHdCQUFrQixFQUFJaEIsa0JBTDFCO0FBTUksaUNBQTJCLEVBQUlHLDJCQU5uQztBQU9JLGtCQUFZLEVBQUl5QixZQVBwQjtBQVFJLHFCQUFlLEVBQUlDLGVBUnZCO0FBU0ksa0JBQVksRUFBSUMsWUFUcEI7QUFVSSxxQkFBZSxFQUFJQztBQVZ2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBekJKLGVBc0NJLCtEQUFDLGdHQUFEO0FBQ0ksZ0JBQVUsRUFBSUwsVUFEbEI7QUFFSSxnQkFBVSxFQUFJZCxVQUZsQjtBQUdJLCtCQUF5QixFQUFJNkIseUJBSGpDO0FBSUkscUJBQWUsRUFBSXJDLGVBSnZCO0FBS0ksbUJBQWEsRUFBSW1EO0FBTHJCO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUF0Q0osZUErQ0ksK0RBQUMsd0ZBQUQ7QUFDSSxnQkFBVSxFQUFJN0IsVUFEbEI7QUFFSSxrQkFBWSxFQUFFNUI7QUFGbEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQS9DSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFESjtBQXdESDs7R0F0UnVCRDs7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVhY3RcclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgdXNlQXhpb3MgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9saWJzL3VzZUF4aW9zXCI7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuXHJcblxyXG4vLyBTdHlsZXNoZWV0XHJcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4uL3N0eWxlcy9Ib21lLm1vZHVsZS5jc3NcIjtcclxuXHJcbi8vIFJldXNhYmxlIENvbXBvbmVudHNcclxuaW1wb3J0IEFsZXJ0IGZyb20gXCIuLi9jb21wb25lbnRzL3JldXNhYmxlLWNvbXBvbmVudHMvQWxlcnRcIjtcclxuXHJcbi8vIGNvbXBvbmVudHNcclxuaW1wb3J0IE5hdmlnYXRpb25CYXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9uYXZpZ2F0aW9uLWJhci9OYXZpZ2F0aW9uQmFyXCI7XHJcbmltcG9ydCBDYXRlZ29yeVRyZWF0bWVudCBmcm9tIFwiLi4vY29tcG9uZW50cy9jbGllbnRzL2NhdGVnb3J5LXRyZWF0bWVudC9DYXRlZ29yeVRyZWF0bWVudFwiO1xyXG5pbXBvcnQgTG9jYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9sb2NhdGlvbi9Mb2NhdGlvblwiO1xyXG5pbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9kYXRlLXRpbWUvRGF0ZVRpbWVcIjtcclxuaW1wb3J0IEluZm9ybWF0aW9uUGF5bWVudCBmcm9tIFwiLi4vY29tcG9uZW50cy9jbGllbnRzL2luZm9ybWF0aW9uLXBheW1lbnQvSW5mb3JtYXRpb25QYXltZW50XCI7XHJcbmltcG9ydCBDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvY2xpZW50cy9jb25maXJtYXRpb24tcGFnZS9Db25maXJtYXRpb25cIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lICgpIHtcclxuXHJcblxyXG4gICAgLy8gT3RoZXIgc3RhdGVzXHJcbiAgICBjb25zdCBbY2xpZW50RXZlbnRzLCBzZXRDbGllbnRFdmVudHNdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgY29uc3QgW3NlbGVjdGVkVHJlYXRtZW50cywgc2V0U2VsZWN0ZWRUcmVhdG1lbnRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtzb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHMsIHNldFNvcnRlZFNlbGVjdGVkVHJlYXRtZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbdmFsaWRhdGlvbkVycm9yLCBzZXRWYWxpZGF0aW9uRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgW2NsaWVudEluZm8sIHNldENsaWVudEluZm9dID0gdXNlU3RhdGUoe1xyXG4gICAgICAgIGZpcnN0TmFtZTogXCJcIixcclxuICAgICAgICBsYXN0TmFtZTogXCJcIixcclxuICAgICAgICBwaG9uZTogXCJcIixcclxuICAgICAgICBlbWFpbDogXCJcIixcclxuICAgICAgICBob3dIZWFyZEFib3V0VXM6IFwiXCIsXHJcbiAgICAgICAgb3RoZXJzOiBcIlwiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcclxuICAgICAgICBjYXRlZ29yeTogXCJcIixcclxuICAgICAgICB0cmVhdG1lbnQ6IFwiXCIsXHJcbiAgICAgICAgbG9jYXRpb246IFwiXCIsXHJcbiAgICAgICAgc2Vzc2lvbjogXCJcIixcclxuICAgICAgICBkYXRlOiBcIlwiLFxyXG4gICAgICAgIHN0eWxpc3Q6IFwiXCIsXHJcbiAgICAgICAgY291cG9uOiBcIlwiLFxyXG4gICAgICAgIHBhaWQ6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBbYWN0aXZlQ2F0ZWdvcnksIHNldEFjdGl2ZUNhdGVnb3J5XSA9IHVzZVN0YXRlKFwiQnJvd3NcIik7XHJcbiAgICBjb25zdCBbYWN0aXZlUGFnZSwgc2V0QWN0aXZlUGFnZV0gPSB1c2VTdGF0ZSgxKTtcclxuICAgIGNvbnN0IFtzZWxlY3RlZERhdGUsIHNldFNlbGVjdGVkRGF0ZV0gPSB1c2VTdGF0ZShcIlwiKTtcclxuICAgIGNvbnN0IFtzZWxlY3RlZFRpbWUsIHNldFNlbGVjdGVkVGltZV0gPSB1c2VTdGF0ZShcIlwiKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8gdXBkYXRlIHRoZSBzdGF0ZSB3aXRoIHZhbHVlcyBvZiB0aGUgbm9uIGlucHV0IGZpZWxkcyBzdWNoIGFzIGxvY2F0aW9uLCBzdHlsaXN0LCBkYXRlLCB0aW1lIGV0Yy4gXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTdGF0ZSAoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGV2ZW50LnRhcmdldC50ZXh0Q29udGVudDtcclxuXHJcbiAgICAgICAgaWYodGV4dC5pbmNsdWRlcyhcIkF0aGVuYSBCZWF1dHkgQ2FyZVwiKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoY3VycmVudFZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB0ZXh0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlQWN0aXZlQ2F0ZWdvcnkgKGUpIHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gZS50YXJnZXQudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgICAgXHJcbiAgICAgICAgc2V0QWN0aXZlQ2F0ZWdvcnkodGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICBcclxuXHJcbiAgICAvKlxyXG4gICAgZnVuY3Rpb24gYWRkVHJlYXRtZW50IChzdHlsaXN0LCBpdGVtKSB7XHJcbiAgICAgICBcclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGFscmVhZHkgc2VsZWN0ZWQgdHJlYXRtZW50cyB0byBzZWUgaWYgY2xpY2tlZCBvbmUgZXhpc3RzIG9yIG5vdC4gSXQgcmV0dXJucyBlaXRoZXIgdHJ1ZSBvciBmYWxzZVxyXG4gICAgICAgIGNvbnN0IGRvZXNFeGlzdCA9IHNlbGVjdGVkVHJlYXRtZW50cy5zb21lKG5ld0l0ZW0gPT4gbmV3SXRlbS50cmVhdG1lbnRUaXRsZSA9PT0gaXRlbS50aXRsZSk7XHJcblxyXG4gICAgICAgIC8vIElmIGNsaWNrZWQgdHJlYXRtZW50IGV4aXN0cyB1cGRhdGUgdGhlIHNlbGVjdGVkVHJlYXRtZW50cyBhcnJheSBieSByZW1vdmluZyB0aGUgY2xpY2tlZCB0cmVhdG1lbnRcclxuICAgICAgICBpZihkb2VzRXhpc3QpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVHJlYXRtZW50cy5mb3JFYWNoKG5ld0l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYobmV3SXRlbS50cmVhdG1lbnRUaXRsZSAhPT0gaXRlbS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChuZXdJdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHNldFNlbGVjdGVkVHJlYXRtZW50cyh0ZW1wKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHN0eWxpc3QpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyZWF0bWVudHMoY3VycmVudFZhbHVlID0+IFxyXG4gICAgICAgICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudFZhbHVlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWF0bWVudFRpdGxlOiBpdGVtLnRpdGxlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWF0bWVudER1cmF0aW9uOiBpdGVtLmR1cmF0aW9uLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWF0bWVudFByaWNlOiBpdGVtLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlblN0eWxpc3Q6IHN0eWxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogc3RhdGUubG9jYXRpb24gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldEFjdGl2ZVRyZWF0bWVudChcIlwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gc2V0QWN0aXZlVHJlYXRtZW50KFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgY2xpY2tlZCB0cmVhdG1lbnQgZG9lc24ndCBleGlzdCB0aGVuIGFkZCBpdCBpbiB0aGUgc2VsZWN0ZWRUcmVhdG1lbnRzIGFycmF5XHJcbiAgICAgICAgc2V0U2VsZWN0ZWRUcmVhdG1lbnRzKGN1cnJlbnRWYWx1ZSA9PiBcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgLi4uY3VycmVudFZhbHVlLCBcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyZWF0bWVudFRpdGxlOiBpdGVtLnRpdGxlLCBcclxuICAgICAgICAgICAgICAgICAgICB0cmVhdG1lbnREdXJhdGlvbjogaXRlbS5kdXJhdGlvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJlYXRtZW50UHJpY2U6IGl0ZW0ucHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NlblN0eWxpc3Q6IHN0eWxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNldEFjdGl2ZVRyZWF0bWVudChcIlwiKTtcclxuXHJcbiAgICB9XHJcbiAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWVudEluZm9PbkNoYW5nZUhhbmRsZXIgKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBldmVudC50YXJnZXQubmFtZTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZVxyXG5cclxuICAgICAgICByZXR1cm4gc2V0Q2xpZW50SW5mbyhjdXJyZW50VmFsdWUgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgLi4uY3VycmVudFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgW25hbWVdOiB2YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RUcmVhdG1lbnQoZXZlbnQsIHRyZWF0bWVudHMpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdHJlYXRtZW50VGl0bGUgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgYWxyZWFkeSBzZWxlY3RlZCB0cmVhdG1lbnRzIHRvIHNlZSBpZiBjbGlja2VkIG9uZSBleGlzdHMgb3Igbm90LiBJdCByZXR1cm5zIGVpdGhlciB0cnVlIG9yIGZhbHNlXHJcbiAgICAgICAgY29uc3QgZG9lc0V4aXN0ID0gc2VsZWN0ZWRUcmVhdG1lbnRzLnNvbWUobmV3SXRlbSA9PiBuZXdJdGVtLnRpdGxlID09PSB0cmVhdG1lbnRUaXRsZSk7XHJcblxyXG5cclxuICAgICAgICBpZihkb2VzRXhpc3QpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkU2VsZWN0ZWRUcmVhdG1lbnRzID0gc2VsZWN0ZWRUcmVhdG1lbnRzLmZpbHRlcih0cmVhdG1lbnQgPT4gdHJlYXRtZW50LnRpdGxlICE9PSB0cmVhdG1lbnRUaXRsZSk7XHJcbiAgICAgICAgICAgIHNldFNlbGVjdGVkVHJlYXRtZW50cyhmaWx0ZXJlZFNlbGVjdGVkVHJlYXRtZW50cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCB0cmVhdG1lbnRzLmxlbmd0aDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodHJlYXRtZW50c1t4XS50aXRsZSA9PT0gdHJlYXRtZW50VGl0bGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmVhdG1lbnRzKGN1cnJlbnRWYWx1ZSA9PiB7IHJldHVybiBbLi4uY3VycmVudFZhbHVlLCB0cmVhdG1lbnRzW3hdXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJvb2tpbmcoKSB7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXCJodHRwOi8vbG9jYWxob3N0OjcwNzAvYXBpL2V2ZW50cy9jbGllbnQtZXZlbnRzXCIsIHtcclxuICAgICAgICAgICAgICAgIHNvcnRlZFNlbGVjdGVkVHJlYXRtZW50cyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVGltZSxcclxuICAgICAgICAgICAgICAgIGNsaWVudEluZm9cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHNldENsaWVudEV2ZW50cyhkYXRhKTtcclxuXHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7XHJcblxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcblxyXG4gICAgICAgICAgICBzZXRDbGllbnRJbmZvKHtcclxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogXCJcIixcclxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcGhvbmU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJcIixcclxuICAgICAgICAgICAgICAgIGhvd0hlYXJkQWJvdXRVczogXCJcIixcclxuICAgICAgICAgICAgICAgIG90aGVyczogXCJcIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNldFN0YXRlKGN1cnJlbnRWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRWYWx1ZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IFwiXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmVhdG1lbnRzKFtdKTtcclxuICAgICAgICAgICAgc2V0U29ydGVkU2VsZWN0ZWRUcmVhdG1lbnRzKFtdKTtcclxuICAgICAgICAgICAgc2V0U2VsZWN0ZWREYXRlKFwiXCIpO1xyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZFRpbWUoXCJcIik7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVBhZ2UoNSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgXHJcbiAgICAvLyBjb25zb2xlLmxvZyhsb2NhdGlvbkRhdGEpO1xyXG5cclxuICAgIC8vIGlmKGxvY2F0aW9uRGF0YUxvYWRpbmcgfHwgY2F0ZWdvcnlEYXRhTG9hZGluZyB8fCB0cmVhdG1lbnREYXRhTG9hZGluZykge1xyXG4gICAgLy8gICAgIHJldHVybiAoPGRpdj5Mb2FkaW5nLi4uLjwvZGl2Pik7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmhvbWV9PlxyXG4gICAgICAgICAgICA8TmF2aWdhdGlvbkJhciBcclxuICAgICAgICAgICAgICAgIHN0YXRlID0ge3N0YXRlfSBcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVHJlYXRtZW50cyA9IHtzZWxlY3RlZFRyZWF0bWVudHN9XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVQYWdlID0ge2FjdGl2ZVBhZ2V9IFxyXG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUGFnZSA9IHtzZXRBY3RpdmVQYWdlfSBcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVGltZSA9IHtzZWxlY3RlZFRpbWV9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxMb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfVxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSB7c3RhdGV9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IHt1cGRhdGVTdGF0ZX0gXHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICA8Q2F0ZWdvcnlUcmVhdG1lbnRcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVHJlYXRtZW50cyA9IHtzZWxlY3RlZFRyZWF0bWVudHN9XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVQYWdlID0ge2FjdGl2ZVBhZ2V9XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDYXRlZ29yeSA9IHthY3RpdmVDYXRlZ29yeX1cclxuICAgICAgICAgICAgICAgIGNoYW5nZUFjdGl2ZUNhdGVnb3J5ID0ge2NoYW5nZUFjdGl2ZUNhdGVnb3J5fVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0VHJlYXRtZW50ID0ge3NlbGVjdFRyZWF0bWVudH1cclxuICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgXHJcblxyXG5cclxuICAgICAgICAgICAgPERhdGVUaW1lXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHtzdGF0ZX0gXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVQYWdlID0ge2FjdGl2ZVBhZ2V9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSA9IHt1cGRhdGVTdGF0ZX0gXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IHtzdGF0ZS5sb2NhdGlvbn1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVHJlYXRtZW50cyA9IHtzZWxlY3RlZFRyZWF0bWVudHN9XHJcbiAgICAgICAgICAgICAgICBzZXRTb3J0ZWRTZWxlY3RlZFRyZWF0bWVudHMgPSB7c2V0U29ydGVkU2VsZWN0ZWRUcmVhdG1lbnRzfVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0ge3NlbGVjdGVkRGF0ZX1cclxuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZSA9IHtzZXRTZWxlY3RlZERhdGV9XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRpbWUgPSB7c2VsZWN0ZWRUaW1lfVxyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRUaW1lID0ge3NldFNlbGVjdGVkVGltZX1cclxuICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgIDxJbmZvcm1hdGlvblBheW1lbnQgXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVQYWdlID0ge2FjdGl2ZVBhZ2V9XHJcbiAgICAgICAgICAgICAgICBjbGllbnRJbmZvID0ge2NsaWVudEluZm99XHJcbiAgICAgICAgICAgICAgICBjbGllbnRJbmZvT25DaGFuZ2VIYW5kbGVyID0ge2NsaWVudEluZm9PbkNoYW5nZUhhbmRsZXJ9IFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yID0ge3ZhbGlkYXRpb25FcnJvcn1cclxuICAgICAgICAgICAgICAgIGNyZWF0ZUJvb2tpbmcgPSB7Y3JlYXRlQm9va2luZ31cclxuICAgICAgICAgICAgLz5cclxuXHJcblxyXG4gICAgICAgICAgICA8Q29uZmlybWF0aW9uIFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZSA9IHthY3RpdmVQYWdlfVxyXG4gICAgICAgICAgICAgICAgY2xpZW50RXZlbnRzPXtjbGllbnRFdmVudHN9XHJcblxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICB7LyogPEFsZXJ0IG1lc3NhZ2U9XCJcIiAvPiAqL31cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VBeGlvcyIsImF4aW9zIiwic3R5bGVzIiwiQWxlcnQiLCJOYXZpZ2F0aW9uQmFyIiwiQ2F0ZWdvcnlUcmVhdG1lbnQiLCJMb2NhdGlvbiIsIkRhdGVUaW1lIiwiSW5mb3JtYXRpb25QYXltZW50IiwiQ29uZmlybWF0aW9uIiwiSG9tZSIsImNsaWVudEV2ZW50cyIsInNldENsaWVudEV2ZW50cyIsInNlbGVjdGVkVHJlYXRtZW50cyIsInNldFNlbGVjdGVkVHJlYXRtZW50cyIsInNvcnRlZFNlbGVjdGVkVHJlYXRtZW50cyIsInNldFNvcnRlZFNlbGVjdGVkVHJlYXRtZW50cyIsInZhbGlkYXRpb25FcnJvciIsInNldFZhbGlkYXRpb25FcnJvciIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicGhvbmUiLCJlbWFpbCIsImhvd0hlYXJkQWJvdXRVcyIsIm90aGVycyIsImNsaWVudEluZm8iLCJzZXRDbGllbnRJbmZvIiwiY2F0ZWdvcnkiLCJ0cmVhdG1lbnQiLCJsb2NhdGlvbiIsInNlc3Npb24iLCJkYXRlIiwic3R5bGlzdCIsImNvdXBvbiIsInBhaWQiLCJzdGF0ZSIsInNldFN0YXRlIiwiYWN0aXZlQ2F0ZWdvcnkiLCJzZXRBY3RpdmVDYXRlZ29yeSIsImFjdGl2ZVBhZ2UiLCJzZXRBY3RpdmVQYWdlIiwic2VsZWN0ZWREYXRlIiwic2V0U2VsZWN0ZWREYXRlIiwic2VsZWN0ZWRUaW1lIiwic2V0U2VsZWN0ZWRUaW1lIiwidXBkYXRlU3RhdGUiLCJldmVudCIsInRleHQiLCJ0YXJnZXQiLCJ0ZXh0Q29udGVudCIsImluY2x1ZGVzIiwiY3VycmVudFZhbHVlIiwiY2hhbmdlQWN0aXZlQ2F0ZWdvcnkiLCJlIiwiY2xpZW50SW5mb09uQ2hhbmdlSGFuZGxlciIsIm5hbWUiLCJ2YWx1ZSIsInNlbGVjdFRyZWF0bWVudCIsInRyZWF0bWVudHMiLCJ0cmVhdG1lbnRUaXRsZSIsImRvZXNFeGlzdCIsInNvbWUiLCJuZXdJdGVtIiwidGl0bGUiLCJmaWx0ZXJlZFNlbGVjdGVkVHJlYXRtZW50cyIsImZpbHRlciIsIngiLCJsZW5ndGgiLCJjcmVhdGVCb29raW5nIiwicG9zdCIsInJlc3BvbnNlIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJob21lIl0sInNvdXJjZVJvb3QiOiIifQ==